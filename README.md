# SIPI_9-10
# 🏠 Flat Analytics & Price Prediction API

## 📌 Описание

Это REST API-сервис для предсказания цен на квартиры, фильтрации по параметрам и визуализации статистики. Проект разработан с использованием Flask и Flask-RESTX (автогенерация Swagger-документации), а также включает бизнес-логику для аналитики и предиктивного анализа.

---

## 🚀 Основной функционал

- 🔮 Предсказание цены квартиры на основе характеристик
- 🔍 Поиск объектов по фильтрам
- 📊 Визуализация признаков
- 🧩 Структурированный REST API
- 🧪 Swagger UI для тестирования и изучения API
- 💡 Простая архитектура для расширения

---

## 📂 Структура проекта

```
├── app.py               # Основной Flask API
├── streamlit_app.py     # (опционально) Веб-интерфейс Streamlit
├── models/              # ML-модели (если будут добавлены)
├── utils/               # Бизнес-логика: предсказания, поиск, аналитика
├── requirements.txt     # Зависимости проекта
├── README.md            # Документация
```

---

## 🛠️ Установка и запуск

### 📦 Установка зависимостей

```bash
pip install -r requirements.txt
```

### ▶️ Запуск сервера

```bash
python app.py
```

Swagger UI будет доступен по адресу:  
[http://localhost:5000/](http://localhost:5000/)

---

## 🔌 API Эндпоинты

### 📈 `POST /predict`

Предсказание цены квартиры

**Тело запроса (JSON):**
```json
{
  "level": 3,
  "levels": 9,
  "rooms": 2,
  "area": 48.0,
  "kitchen_area": 10.0,
  "building_type": 1,
  "object_type": 2,
  "region_id": 101
}
```

**Пример ответа:**
```json
{
  "estimation": 145000.0,
  "+/-2": 10000.0,
  "mape": 12.5
}
```

---

### 🔍 `POST /search`

Поиск квартир по фильтрам

**Тело запроса:**
```json
{
  "features_name": ["rooms", "area"],
  "conditions": [">=", "<="],
  "value": [2, 60.0]
}
```

**Пример ответа:**
```json
{
  "level": [1, 2],
  "levels": [5, 10],
  "rooms": [2, 3],
  "area": [45.5, 60.0],
  "kitchen_area": [10.0, 12.5],
  "building_type": [1],
  "object_type": [2],
  "region_id": [101]
}
```

---

### 📊 `POST /visualize`

Визуализация данных по признаку

**Тело запроса:**
```json
{
  "feature_name": "area"
}
```

**Пример ответа:**
```json
{
  "feature": [5, 15, 25, 35]
}
```

---

## 🧠 Архитектура компонентов

| Класс                | Назначение                                                                 |
|----------------------|----------------------------------------------------------------------------|
| `PricePredictionModel` | Заглушка модели. Загружает модель и возвращает предсказание               |
| `FlatPredictionData`   | Препроцессинг и валидация данных                                          |
| `FlatSearchData`       | Фильтрация квартир по заданным условиям                                   |
| `FlatAnalytics`        | Генерация статистики и диаграмм                                           |
| `Database`             | Заглушка БД — реализовать подключение и SQL-запросы при необходимости    |

---

## 📊 Swagger UI

Swagger автоматически доступен при запуске `app.py`.  
Позволяет тестировать API, видеть схемы входов/выходов и генерировать curl-запросы.

---

## 🎯 Возможности расширения

- Подключение реальной ML-модели
- Подключение к настоящей БД
- Streamlit-интерфейс
- Авторизация
- Кеширование

---

## 🙋 Поддержка

Разработчик: *[Gen Shen]*  
Email: `genshen@gmail.com`
